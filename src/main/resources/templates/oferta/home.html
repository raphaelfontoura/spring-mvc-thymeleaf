<!DOCTYPE html>
<html lang="pt-BR">

<head th:replace="~{base :: head}"></head>

<body onload="onLoad()">
  <div th:replace="~{base :: logo}"></div>

  <div class="container" id="ofertas">
    <div th:replace="~{base :: titulo('Faça sua Oferta')}"></div>

    <div v-if="loading" class="d-flex justify-content-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>

    <div v-else class="card mb-3 mt-3" v-for="pedido in pedidos">

        <div class="card-header alert-dark">
          {{ pedido.nomeProduto }}
        </div>

        <div class="card-body row">

          <div class="conteudo col-12 mb-3 col-sm-8">

            <div class="row">
              <div class="col-md-5">
                <!-- Valor: <span th:text="${#numbers.formatCurrency(pedido.valorNegociado)}">200,99</span> -->
                Valor: <input />
              </div>
              <div class="col-md-7">
                Data da entrega: <input />
              </div>
            </div>


            <div> Produto </div>
            <div> <a v-bind:href="pedido.urlProduto"> {{pedido.nomeProduto}} </a> </div>

            <div>Descrição</div>
            <div>
              <textarea class="form-control">
                {{pedido.descricao}}
              </textarea>
            </div>
          </div>


          <div class="imagem col-12 col-sm-4">
            <div>
              <img class="img-thumbnail" v-bind:src="pedido.urlImagem" src="" alt="">
            </div>
          </div>


        </div>

    </div>
  </div>
  <script>
    function onLoad() {
      var app = new Vue({
        el: '#ofertas',
        data: {
          pedidos: [],
          loading: true,
        },
        mounted() {
          axios
            .get('http://localhost:8080/api/pedidos/aguardando')
            .then(response => (this.pedidos = response.data))
            .catch(err => console.log(err))
            .finally(() => this.loading = false);
        }
      });
      console.log(pedidos);
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</body>

</html>